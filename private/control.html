<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>FSCOREBOARD Control Panel</title>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      max-width: 800px; 
      margin: 20px auto; 
      background: #f4f4f4; 
      padding: 20px;
    }
    
    .header {
      text-align: center;
      margin-bottom: 30px;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .presets-section {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border: 1px solid #ddd;
    }
    
    .presets-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .presets-grid {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 20px;
    }
    
    .preset-card {
      border: 2px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .preset-card:hover {
      border-color: #338af3;
      background: #f8f9ff;
    }
    
    .preset-name {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 10px;
      color: #333;
    }
    
    .preset-teams {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }
    
    .preset-team {
      text-align: center;
      flex: 1;
    }
    
    .preset-team-name {
      font-weight: bold;
      color: #338af3;
    }
    
    .preset-team-city {
      font-size: 12px;
      color: #666;
    }
    
    .preset-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }
    
    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .btn-primary {
      background: #338af3;
      color: white;
    }
    
    .btn-danger {
      background: #dc3545;
      color: white;
    }
    
    .btn:hover {
      opacity: 0.8;
    }
    
    .add-preset-form {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
    }
    
    .form-group {
      flex: 1;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #333;
    }
    
    .form-group input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .form-group input[type="color"] {
      width: 60px;
      height: 40px;
      padding: 0;
    }
    
    .camera-content {
      background: #fff;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      border: 1px solid #ddd;
    }
    
    .timer-row { 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      gap: 16px; 
      margin: 20px 0; 
    }
    
    .playpause-btn, .set-btn {
      width: 56px; 
      height: 44px;
      background: #338af3; 
      color: #fff; 
      border: none; 
      border-radius: 8px;
      display: flex; 
      align-items: center; 
      justify-content: center;
      font-size: 2em; 
      cursor: pointer; 
      transition: background 0.2s;
    }
    
    .playpause-btn:hover, .set-btn:hover { 
      background: #2561a7; 
    }
    
    .timer-inputs {
      display: flex; 
      align-items: center; 
      gap: 8px;
      background: #fff; 
      border-radius: 8px; 
      padding: 8px 12px;
      border: 1px solid #ccc;
    }
    
    .timer-inputs input[type="text"] {
      width: 80px; 
      font-size: 1.2em; 
      text-align: center; 
      border: none; 
      background: none; 
      outline: none;
      letter-spacing: 2px;
    }
    
    .score-row { 
      display: flex; 
      justify-content: center; 
      gap: 30px; 
      margin-top: 20px; 
    }
    
    .score-block { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      padding: 0; 
      min-width: 120px; 
    }
    
    .score-controls { 
      display: flex; 
      gap: 10px; 
      margin-bottom: 8px; 
    }
    
    .score-btn {
      background: #338af3; 
      color: #fff; 
      border: none; 
      border-radius: 8px;
      width: 44px; 
      height: 44px; 
      font-size: 1.4em; 
      font-weight: bold; 
      cursor: pointer;
      display: flex; 
      align-items: center; 
      justify-content: center;
    }
    
    .score-btn:hover { 
      background: #2561a7; 
    }
    
    .score-value { 
      font-size: 2em; 
      color: #338af3; 
      min-width: 32px; 
      text-align: center; 
    }
    
    .short-label-row { 
      margin-top: 6px; 
      display: flex; 
      justify-content: center; 
      align-items: center; 
    }
    
    .short-label-row input[type="text"] {
      width: 50px; 
      text-align: center; 
      font-size: 1.2em; 
      border-radius: 8px; 
      border: 1px solid #ccc; 
      padding: 4px 0;
      background: #fff; 
      text-transform: uppercase; 
      font-weight: bold; 
      letter-spacing: 2px;
    }
    
    .kit-block { 
      display: flex; 
      flex-direction: row; 
      align-items: center; 
      justify-content: center; 
      gap: 0; 
      width: 120px; 
    }
    
    .kit-color {
      width: 100px; 
      height: 32px; 
      border-radius: 4px; 
      border: 1px solid #ccc;
      background: none; 
      margin: 0; 
      padding: 0; 
      cursor: pointer; 
      display: block;
    }
    
    .label-caption {
      font-size: 0.85em; 
      color: #888; 
      margin-bottom: 2px; 
      text-align: center; 
      font-weight: normal; 
      letter-spacing: 1px;
    }
    
    .team-input-row { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      width: 100%; 
      gap: 4px; 
      margin-top: 6px; 
    }
    
    .team-input-row input[type="text"] {
      width: 100%;
      text-align: center; 
      font-size: 1em; 
      border-radius: 8px; 
      border: 1px solid #ccc; 
      padding: 4px 0;
      background: #fff; 
      color: #338af3; 
      font-weight: bold; 
    }
    
    .city-input-row input[type="text"] {
      width: 100%;
      text-align: center; 
      font-size: 1em; 
      border-radius: 8px; 
      border: 1px solid #ccc; 
      padding: 4px 0;
      background: #fff; 
      color: #888; 
      font-weight: normal;
    }
    
    .divider { 
      width: 2px; 
      background: #ccc; 
      margin: 0 10px; 
    }
    
    .hidden {
      display: none;
    }
    
    .version-info {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 0.6em;
      color: #ccc;
      background: rgba(255, 255, 255, 0.8);
      padding: 2px 6px;
      border-radius: 3px;
      opacity: 0.7;
      z-index: 1000;
    }
    
    .preset-card {
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: #fff;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 8px;
      transition: all 0.2s;
      box-sizing: border-box;
      width: 100%;
      max-width: 100%;
    }
    
    .preset-card:hover {
      background: #f8f9fa;
    }
    
    .preset-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }
    
    .preset-left {
      display: flex;
      align-items: flex-start;
      min-width: 0;
      overflow: hidden;
      flex-direction: column;
      gap: 8px;
    }
    
    .preset-name {
      font-weight: bold;
      font-size: 14px;
      margin-right: 0;
      white-space: nowrap;
      background: #e9ecef;
      padding: 2px 6px;
      border-radius: 4px;
      align-self: flex-start;
    }
    
    .preset-teams {
      display: flex;
      align-items: center;
      gap: 4px;
      min-width: 0;
      align-self: flex-start;
    }
    
    .preset-right {
      display: flex;
      align-items: flex-start;
      gap: 24px;
      flex-shrink: 0;
      align-self: flex-start;
    }
    
    .preset-team-name {
      font-size: 14px;
      white-space: nowrap;
    }
    
    .preset-separator {
      font-size: 14px;
      color: #666;
      margin: 0 2px;
    }
    
    .preset-kit-color {
      width: 12px;
      height: 12px;
      border-radius: 2px;
      border: 1px solid #ccc;
      display: inline-block;
      flex-shrink: 0;
    }
    
    .preset-edit-link {
      color: #999;
      text-decoration: underline;
      text-decoration-style: dashed;
      cursor: pointer;
      font-size: 12px;
      margin-left: 16px;
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    .preset-edit-link:hover {
      color: #666;
    }
    
    .preset-play-btn {
      background: none;
      border: none;
      color: #28a745;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      padding: 4px 8px;
      flex-shrink: 0;
    }
    
    .preset-play-btn:hover {
      color: #218838;
    }
    
    .preset-play-btn:disabled {
      color: #ccc;
      cursor: not-allowed;
    }
    
    .confirmation-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    
    .confirmation-content {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      max-width: 400px;
      text-align: center;
    }
    
    .confirmation-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 16px;
    }
    
    .confirmation-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    
    .confirmation-btn.confirm {
      background: #28a745;
      color: white;
    }
    
    .confirmation-btn.confirm:hover {
      background: #218838;
    }
    
    .confirmation-btn.cancel {
      background: #6c757d;
      color: white;
    }
    
    .confirmation-btn.cancel:hover {
      background: #5a6268;
    }
    
    /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
      body {
        font-size: 16px;
        padding: 10px;
      }
      
      .camera-content {
        padding: 15px;
        margin-bottom: 15px;
      }
      
      .timer-row {
        flex-direction: row;
        gap: 12px;
        margin: 15px 0;
        justify-content: center;
        align-items: center;
      }
      
      .playpause-btn, .set-btn {
        width: 60px;
        height: 50px;
        font-size: 16px;
      }
      
      .timer-inputs input {
        font-size: 18px;
        padding: 8px 12px;
        width: 80px;
        text-align: center;
      }
      
      .score-row {
        flex-direction: row;
        gap: 20px;
        justify-content: space-between;
      }
      
      .score-block {
        width: 48%;
        max-width: none;
      }
      
      .score-controls {
        justify-content: center;
        margin-bottom: 10px;
      }
      
      .score-btn {
        width: 45px;
        height: 45px;
        font-size: 18px;
      }
      
      .score-value {
        font-size: 28px;
        margin: 0 15px;
      }
      
      .short-label-row {
        justify-content: center;
        margin-bottom: 10px;
      }
      
      .short-label-row input {
        font-size: 16px;
        padding: 6px 10px;
        width: 70px;
        text-align: center;
      }
      
      .kit-block {
        justify-content: center;
        margin-bottom: 10px;
      }
      
      .kit-color {
        width: 35px;
        height: 35px;
      }
      
      .team-input-row {
        margin-bottom: 10px;
      }
      
      .team-input-row input {
        font-size: 14px;
        padding: 8px 10px;
      }
      
      .presets-section {
        padding: 15px;
      }
      
      .presets-header {
        flex-direction: column;
        gap: 15px;
        align-items: stretch;
      }
      
      .presets-header h2 {
        text-align: center;
        margin-bottom: 0;
      }
      
      .btn {
        font-size: 16px;
        padding: 12px 20px;
        width: 100%;
      }
      
      .preset-card {
        padding: 15px;
        margin-bottom: 10px;
        flex-direction: row;
        align-items: flex-start;
        justify-content: space-between;
      }
      
      .preset-content {
        flex-direction: row;
        justify-content: space-between;
        align-items: flex-start;
      }
      
      .preset-left {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
        flex: 1;
      }
      
      .preset-name {
        font-size: 16px;
        margin-right: 0;
        padding: 4px 8px;
        align-self: flex-start;
      }
      
      .preset-teams {
        width: 100%;
        justify-content: flex-start;
        align-self: flex-start;
      }
      
      .preset-team-name {
        font-size: 16px;
      }
      
      .preset-kit-color {
        width: 16px;
        height: 16px;
      }
      
      .preset-separator {
        font-size: 16px;
        margin: 0 4px;
      }
      
      .preset-right {
        align-self: flex-start;
        margin-top: 0;
        flex-shrink: 0;
      }
      
      .preset-edit-link {
        font-size: 14px;
        margin-left: 0;
      }
      
      .preset-play-btn {
        font-size: 18px;
        padding: 6px 10px;
      }
      
      .form-row {
        flex-direction: column;
        gap: 15px;
        width: 100%;
        box-sizing: border-box;
      }
      
      .form-group {
        width: 100%;
        box-sizing: border-box;
      }
      
      .form-group input {
        font-size: 16px;
        padding: 10px 12px;
        width: 100%;
        box-sizing: border-box;
        max-width: 100%;
      }
      
      .form-group label {
        font-size: 14px;
        margin-bottom: 5px;
        display: block;
        width: 100%;
        box-sizing: border-box;
      }
      
      .edit-preset-form {
        padding: 15px;
        margin: 15px 0;
        box-sizing: border-box;
        width: 100%;
        max-width: 100%;
      }
      
      .team-divider {
        margin: 15px 0;
      }
    }
    
    .timer-running-warning {
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      color: #856404;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 20px;
      text-align: center;
      font-weight: bold;
    }
    
    .disabled-field {
      opacity: 0.6;
      pointer-events: none;
      background-color: #f8f9fa !important;
    }
    
    .preset-card.editable {
      cursor: pointer;
      border-style: dashed;
    }
    
    .preset-card.editable:hover {
      border-color: #007bff;
      background: #f8f9ff;
    }
    
    .edit-preset-form {
      background: #e3f2fd;
      border: 2px solid #2196f3;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
    }
    
    .edit-preset-form .form-section {
      margin-bottom: 25px;
    }
    
    .edit-preset-form .form-group {
      margin-bottom: 15px;
    }
    
    .editable-title {
      cursor: pointer;
      border: 2px solid transparent;
      padding: 8px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }
    
    .editable-title:hover {
      border-color: #007bff;
      background-color: #f8f9ff;
    }
    
    .section-title {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
      color: #1976d2;
      font-size: 16px;
      font-weight: 600;
    }
    
    .logo-mini {
      width: 25px;
      height: 25px;
      border-radius: 3px;
      border: 1px solid #ddd;
      object-fit: cover;
      display: inline-block;
      background: #f5f5f5;
    }
    
    .logo-mini img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 3px;
    }
    
    .logo-upload-row {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 10px;
    }
    
    .logo-mini-main {
      width: 30px;
      height: 30px;
      border-radius: 4px;
      border: 2px solid #ddd;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #f5f5f5;
      flex-shrink: 0;
    }
    
    .logo-mini-main img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 2px;
    }
    
    .logo-upload-btn {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    
    .logo-upload-btn:hover {
      background: #0056b3;
    }
    
    .edit-preset-form .form-group input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 5px;
    }
    
    .edit-preset-form .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
      font-size: 13px;
    }
    
    .logo-preview {
      margin-top: 8px;
      text-align: center;
    }
    
    .logo-preview img {
      max-width: 50px;
      max-height: 50px;
      border-radius: 4px;
      border: 1px solid #ddd;
      object-fit: cover;
    }
    
    .logo-preview .no-logo {
      color: #999;
      font-size: 12px;
      font-style: italic;
    }
    
    .edit-preset-form h3 {
      color: #1976d2;
      margin-top: 0;
    }
    
    .team-divider {
      height: 2px;
      background: #ddd;
      margin: 20px 0;
      border-radius: 1px;
    }
  </style>
</head>
<body>
  <!-- –í–µ—Ä—Å–∏—è –≤ —É–≥–ª—É -->
  <div class="version-info">v1.0.0</div>

  <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–æ -->
  <div class="camera-content">
    <div class="timer-row">
      <button id="playPauseBtn" class="playpause-btn" title="–ü—É—Å–∫/–ü–∞—É–∑–∞">
        <svg id="playPauseIcon" width="32" height="32" viewBox="0 0 32 32" fill="none">
          <polygon id="playIcon" points="8,6 26,16 8,26" fill="white"/>
        </svg>
      </button>
      <div class="timer-inputs">
        <input type="text" id="timeInput" maxlength="5" placeholder="MM:SS" pattern="^\d{2}:\d{2}$" value="00:00" autocomplete="off" />
      </div>
      <button id="setBtn" class="set-btn">Set</button>
    </div>
    <form id="controlForm" autocomplete="off" spellcheck="false">
      <div class="score-row">
        <div class="score-block">
          <div class="score-controls">
            <button type="button" class="score-btn" id="score1Dec">-</button>
            <span class="score-value" id="score1Value">0</span>
            <button type="button" class="score-btn" id="score1Inc">+</button>
          </div>
          <div class="short-label-row">
            <input type="text" id="team1Short" maxlength="3" placeholder="–•–û–ó" />
          </div>
          <div class="kit-block">
            <input type="color" id="kit1Color" value="#2b2b2b" class="kit-color">
          </div>
          <div class="team-input-row">
            <span class="label-caption">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</span>
            <input type="text" id="team1Name" maxlength="40" placeholder="–ù–µ –≤–≤–µ–¥–µ–Ω–æ" />
          </div>
          <div class="city-input-row team-input-row">
            <span class="label-caption">–ì–æ—Ä–æ–¥</span>
            <input type="text" id="team1City" maxlength="30" placeholder="–ù–µ –≤–≤–µ–¥–µ–Ω–æ" />
          </div>
          <div class="logo-upload-row">
            <span id="team1LogoMini" class="logo-mini-main"></span>
            <input type="file" id="team1LogoUpload" accept="image/*" onchange="uploadMainLogo('team1', this)" style="display: none;">
            <button type="button" class="logo-upload-btn" onclick="document.getElementById('team1LogoUpload').click()">üì∑ –õ–æ–≥–æ—Ç–∏–ø</button>
          </div>
        </div>
        <div class="divider"></div>
        <div class="score-block">
          <div class="score-controls">
            <button type="button" class="score-btn" id="score2Dec">-</button>
            <span class="score-value" id="score2Value">0</span>
            <button type="button" class="score-btn" id="score2Inc">+</button>
          </div>
          <div class="short-label-row">
            <input type="text" id="team2Short" maxlength="3" placeholder="–ì–û–°" />
          </div>
          <div class="kit-block">
            <input type="color" id="kit2Color" value="#2b2b2b" class="kit-color">
          </div>
          <div class="team-input-row">
            <span class="label-caption">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</span>
            <input type="text" id="team2Name" maxlength="40" placeholder="–ù–µ –≤–≤–µ–¥–µ–Ω–æ" />
          </div>
          <div class="city-input-row team-input-row">
            <span class="label-caption">–ì–æ—Ä–æ–¥</span>
            <input type="text" id="team2City" maxlength="30" placeholder="–ù–µ –≤–≤–µ–¥–µ–Ω–æ" />
          </div>
          <div class="logo-upload-row">
            <span id="team2LogoMini" class="logo-mini-main"></span>
            <input type="file" id="team2LogoUpload" accept="image/*" onchange="uploadMainLogo('team2', this)" style="display: none;">
            <button type="button" class="logo-upload-btn" onclick="document.getElementById('team2LogoUpload').click()">üì∑ –õ–æ–≥–æ—Ç–∏–ø</button>
          </div>
        </div>
      </div>
    </form>
  </div>

  <!-- –°–µ–∫—Ü–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫ -->
  <div class="presets-section">
    <div class="presets-header">
      <h2>–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∞—Ç—á–µ–π</h2>
      <button class="btn btn-primary" onclick="toggleAddPresetForm()" id="addPresetBtn">+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É</button>
    </div>
    
    <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ —Ä–∞–±–æ—Ç–∞—é—â–µ–º —Ç–∞–π–º–µ—Ä–µ -->
    <div id="timerWarning" class="timer-running-warning hidden">
      ‚ö†Ô∏è –¢–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω! –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã: –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫. –î–æ—Å—Ç—É–ø–Ω–æ: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–æ–º, —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫.
    </div>
    
    <div id="presetsGrid" class="presets-grid">
      <!-- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
    </div>
    
    <div id="addPresetForm" class="add-preset-form hidden">
      <h3>–ù–æ–≤–∞—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞</h3>
      <div class="form-row">
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞</label>
          <input type="text" id="presetName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –§–∏–Ω–∞–ª —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 1 - –ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" id="presetTeam1Name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã">
        </div>
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 1 - –ì–æ—Ä–æ–¥</label>
          <input type="text" id="presetTeam1City" placeholder="–ì–æ—Ä–æ–¥">
        </div>
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 1 - –®–æ—Ä—Ç–∫–æ–¥</label>
          <input type="text" id="presetTeam1Short" placeholder="–•–û–ó" maxlength="3">
        </div>
        <div class="form-group">
          <label>–¶–≤–µ—Ç —Ñ–æ—Ä–º—ã 1</label>
          <input type="color" id="presetKit1Color" value="#2b2b2b">
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 2 - –ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" id="presetTeam2Name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã">
        </div>
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 2 - –ì–æ—Ä–æ–¥</label>
          <input type="text" id="presetTeam2City" placeholder="–ì–æ—Ä–æ–¥">
        </div>
        <div class="form-group">
          <label>–ö–æ–º–∞–Ω–¥–∞ 2 - –®–æ—Ä—Ç–∫–æ–¥</label>
          <input type="text" id="presetTeam2Short" placeholder="–ì–û–°" maxlength="3">
        </div>
        <div class="form-group">
          <label>–¶–≤–µ—Ç —Ñ–æ—Ä–º—ã 2</label>
          <input type="color" id="presetKit2Color" value="#2b2b2b">
        </div>
      </div>
      <div class="form-row">
        <button class="btn btn-primary" onclick="savePreset()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button class="btn" onclick="toggleAddPresetForm()">–û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>

    <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ -->
    <div id="editPresetForm" class="edit-preset-form hidden">
      <h3 id="editPresetTitle" class="editable-title" onclick="startEditingTitle()">–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞</h3>
      <input type="text" id="editPresetNameInput" class="hidden" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –§–∏–Ω–∞–ª —á–µ–º–ø–∏–æ–Ω–∞—Ç–∞" onblur="finishEditingTitle()" onkeypress="handleTitleKeypress(event)">
      <div class="form-section">
        <h4 class="section-title">
          <span id="editPresetTeam1LogoMini" class="logo-mini"></span>
          –ö–æ–º–∞–Ω–¥–∞ 1
        </h4>
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" id="editPresetTeam1Name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã">
      </div>
        <div class="form-group">
          <label>–ì–æ—Ä–æ–¥</label>
          <input type="text" id="editPresetTeam1City" placeholder="–ì–æ—Ä–æ–¥">
    </div>
        <div class="form-group">
          <label>–®–æ—Ä—Ç–∫–æ–¥</label>
          <input type="text" id="editPresetTeam1Short" placeholder="–•–û–ó" maxlength="3">
          </div>
        <div class="form-group">
          <label>–¶–≤–µ—Ç —Ñ–æ—Ä–º—ã</label>
          <input type="color" id="editPresetKit1Color" value="#2b2b2b">
          </div>
        <div class="form-group">
          <label>–õ–æ–≥–æ—Ç–∏–ø</label>
          <input type="file" id="editPresetTeam1Logo" accept="image/*" onchange="uploadLogo('team1', this)">
          <div id="editPresetTeam1LogoPreview" class="logo-preview"></div>
          </div>
          </div>
      <div class="team-divider"></div>
      <div class="form-section">
        <h4 class="section-title">
          –ö–æ–º–∞–Ω–¥–∞ 2
          <span id="editPresetTeam2LogoMini" class="logo-mini"></span>
        </h4>
        <div class="form-group">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
          <input type="text" id="editPresetTeam2Name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã">
          </div>
        <div class="form-group">
          <label>–ì–æ—Ä–æ–¥</label>
          <input type="text" id="editPresetTeam2City" placeholder="–ì–æ—Ä–æ–¥">
        </div>
        <div class="form-group">
          <label>–®–æ—Ä—Ç–∫–æ–¥</label>
          <input type="text" id="editPresetTeam2Short" placeholder="–ì–û–°" maxlength="3">
          </div>
        <div class="form-group">
          <label>–¶–≤–µ—Ç —Ñ–æ—Ä–º—ã</label>
          <input type="color" id="editPresetKit2Color" value="#2b2b2b">
          </div>
        <div class="form-group">
          <label>–õ–æ–≥–æ—Ç–∏–ø</label>
          <input type="file" id="editPresetTeam2Logo" accept="image/*" onchange="uploadLogo('team2', this)">
          <div id="editPresetTeam2LogoPreview" class="logo-preview"></div>
          </div>
          </div>
      <div class="form-row">
        <button class="btn btn-primary" onclick="updatePreset()">–û–±–Ω–æ–≤–∏—Ç—å</button>
        <button class="btn btn-danger" onclick="deletePresetFromEdit()">–£–¥–∞–ª–∏—Ç—å</button>
        <button class="btn" onclick="cancelEditPreset()">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    let presets = [];
    let ready = false;
    let timerRunning = false;
    let editingPresetId = null;
    let originalPresetData = null;
    let uploadedLogos = {
      team1: null,
      team2: null
    };
    let state = {
      team1Logo: '',
      team2Logo: ''
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', function() {
      loadPresets();
      setupControls();
      setupEditFormHandlers();
    });
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –¥–ª—è —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    function setupEditFormHandlers() {
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –≤–Ω–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      document.addEventListener('click', function(event) {
        const editForm = document.getElementById('editPresetForm');
        const editLinks = document.querySelectorAll('.preset-edit-link');
        const isEditLink = Array.from(editLinks).some(link => link.contains(event.target));
        
        if (editForm && !editForm.classList.contains('hidden') && 
            !editForm.contains(event.target) && !isEditLink) {
          handleEditFormClose();
        }
      });
      
      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –ø–æ–ª—è—Ö —Ñ–æ—Ä–º—ã
      const formFields = [
        'editPresetName', 'editPresetTeam1Name', 'editPresetTeam1City', 
        'editPresetTeam1Short', 'editPresetKit1Color', 'editPresetTeam2Name', 
        'editPresetTeam2City', 'editPresetTeam2Short', 'editPresetKit2Color'
      ];
      
      formFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (field) {
          field.addEventListener('input', function() {
            // –ü–æ–ª–µ –∏–∑–º–µ–Ω–µ–Ω–æ, –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
          });
        }
      });
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ñ–æ—Ä–º–µ
    function hasFormChanges() {
      if (!originalPresetData) return false;
      
      const currentData = {
        name: document.getElementById('editPresetName').value.trim(),
        team1Name: document.getElementById('editPresetTeam1Name').value.trim(),
        team1City: document.getElementById('editPresetTeam1City').value.trim(),
        team1Short: document.getElementById('editPresetTeam1Short').value.trim(),
        kit1Color: document.getElementById('editPresetKit1Color').value,
        team2Name: document.getElementById('editPresetTeam2Name').value.trim(),
        team2City: document.getElementById('editPresetTeam2City').value.trim(),
        team2Short: document.getElementById('editPresetTeam2Short').value.trim(),
        kit2Color: document.getElementById('editPresetKit2Color').value
      };
      
      return JSON.stringify(currentData) !== JSON.stringify(originalPresetData);
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    function handleEditFormClose() {
      if (hasFormChanges()) {
        if (confirm('–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º?')) {
          updatePreset();
        }
      }
      cancelEditPreset();
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
    async function uploadLogo(team, fileInput) {
      if (!fileInput.files[0]) return;
      
      const formData = new FormData();
      formData.append('logo', fileInput.files[0]);
      
      try {
        const response = await fetch(`/api/upload-logo?token=${getToken()}`, {
          method: 'POST',
          body: formData
        });
        
        if (response.ok) {
          const result = await response.json();
          uploadedLogos[team] = result.filename;
          showLogoPreview(team, result.url);
          updateLogoMini(team, result.url);
          showNotification('–õ–æ–≥–æ—Ç–∏–ø –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
        } else {
          const error = await response.json();
          showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + error.error, 'error');
        }
      } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ—Ç–∏–ø–∞', 'error');
        console.error('Upload error:', error);
      }
    }
    
    // –ü–æ–∫–∞–∑ –ø—Ä–µ–≤—å—é –ª–æ–≥–æ—Ç–∏–ø–∞
    function showLogoPreview(team, url) {
      const preview = document.getElementById(`editPresetTeam${team === 'team1' ? '1' : '2'}LogoPreview`);
      preview.innerHTML = `<img src="${url}" alt="–õ–æ–≥–æ—Ç–∏–ø ${team}">`;
    }
    
    // –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞
    function clearLogo(team) {
      uploadedLogos[team] = null;
      const preview = document.getElementById(`editPresetTeam${team === 'team1' ? '1' : '2'}LogoPreview`);
      preview.innerHTML = '<div class="no-logo">–ù–µ—Ç –ª–æ–≥–æ—Ç–∏–ø–∞</div>';
    }
    
    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
    function startEditingTitle() {
      const title = document.getElementById('editPresetTitle');
      const input = document.getElementById('editPresetNameInput');
      
      title.classList.add('hidden');
      input.classList.remove('hidden');
      input.value = title.textContent;
      input.focus();
      input.select();
    }
    
    function finishEditingTitle() {
      const title = document.getElementById('editPresetTitle');
      const input = document.getElementById('editPresetNameInput');
      
      title.textContent = input.value.trim() || '–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞';
      title.classList.remove('hidden');
      input.classList.add('hidden');
    }
    
    function handleTitleKeypress(event) {
      if (event.key === 'Enter') {
        finishEditingTitle();
      }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä –ª–æ–≥–æ—Ç–∏–ø–æ–≤
    function updateLogoMini(team, logoUrl) {
      const mini = document.getElementById(`editPresetTeam${team === 'team1' ? '1' : '2'}LogoMini`);
      if (logoUrl) {
        mini.innerHTML = `<img src="${logoUrl}" alt="–õ–æ–≥–æ—Ç–∏–ø ${team}">`;
      } else {
        mini.innerHTML = '';
      }
    }
    
    // –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ–æ—Ä–º—É
    async function uploadMainLogo(team, fileInput) {
      if (!fileInput.files[0]) return;
      
      const formData = new FormData();
      formData.append('logo', fileInput.files[0]);
      
      try {
        const response = await fetch(`/api/upload-logo?token=${getToken()}`, {
          method: 'POST',
          body: formData
        });
        
        if (response.ok) {
          const result = await response.json();
          updateMainLogoMini(team, result.url);
          updateMainLogoState(team, result.url);
          showNotification('–õ–æ–≥–æ—Ç–∏–ø –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
        } else {
          const error = await response.json();
          showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + error.error, 'error');
        }
      } catch (error) {
        showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ—Ç–∏–ø–∞', 'error');
        console.error('Upload error:', error);
      }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–µ
    function updateMainLogoMini(team, logoUrl) {
      const mini = document.getElementById(`${team}LogoMini`);
      if (logoUrl) {
        mini.innerHTML = `<img src="${logoUrl}" alt="–õ–æ–≥–æ—Ç–∏–ø ${team}">`;
      } else {
        mini.innerHTML = '';
      }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–æ–≥–æ—Ç–∏–ø–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ—Ä–º–µ
    function updateMainLogoState(team, logoUrl) {
      state[`${team}Logo`] = logoUrl;
      socket.emit('updateScoreboard', {
        [`${team}Logo`]: logoUrl
      });
    }
    
    // –ü–æ–∫–∞–∑ —Å–µ—Ä–æ–≥–æ –∫—Ä—É–≥–∞ —Ü–≤–µ—Ç–∞ —Ñ–æ—Ä–º—ã
    function showKitColorCircle(team) {
      const mini = document.getElementById(`${team}LogoMini`);
      const kitColor = document.getElementById(`kit${team === 'team1' ? '1' : '2'}Color`).value;
      mini.innerHTML = `<div style="width: 100%; height: 100%; background-color: ${kitColor}; border-radius: 50%;"></div>`;
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤
    function setupControls() {
      // –¢–∞–π–º–µ—Ä
      document.getElementById('playPauseBtn').onclick = function() {
        const isRunning = document.getElementById('playPauseIcon').innerHTML.includes('rect');
        socket.emit('updateScoreboard', { 
          timerRunning: !isRunning 
        });
      };
      
      document.getElementById('setBtn').onclick = function() {
        const seconds = getSecondsFromTimeInput('timeInput');
        socket.emit('updateScoreboard', { 
          timerSeconds: seconds 
        });
      };

      // –°—á–µ—Ç
      document.getElementById('score1Inc').onclick = () => {
        const current = parseInt(document.getElementById('score1Value').textContent);
        socket.emit('updateScoreboard', { 
          score1: current + 1 
        });
      };
      
      document.getElementById('score1Dec').onclick = () => {
        const current = parseInt(document.getElementById('score1Value').textContent);
        if (current > 0) {
          socket.emit('updateScoreboard', { 
            score1: current - 1 
          });
        }
      };
      
      document.getElementById('score2Inc').onclick = () => {
        const current = parseInt(document.getElementById('score2Value').textContent);
        socket.emit('updateScoreboard', { 
          score2: current + 1 
        });
      };
      
      document.getElementById('score2Dec').onclick = () => {
        const current = parseInt(document.getElementById('score2Value').textContent);
        if (current > 0) {
          socket.emit('updateScoreboard', { 
            score2: current - 1 
          });
        }
      };

      // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —à–æ—Ä—Ç–∫–æ–¥–æ–≤
      autoShortName('team1Name', 'team1Short', '–•–û–ó');
      autoShortName('team2Name', 'team2Short', '–ì–û–°');

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
      const fields = [
        'team1Name', 'team2Name', 'team1City', 'team2City',
        'kit1Color', 'kit2Color'
      ];
      
      fields.forEach(fieldId => {
        document.getElementById(fieldId).addEventListener('input', () => {
          sendState();
        });
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏
      document.getElementById('timeInput').addEventListener('input', function(e) {
        let v = this.value.replace(/[^\d:]/g, '');
        if (v.length === 2 && !v.includes(':')) v = v + ':';
        if (v.length > 5) v = v.slice(0,5);
        if (v.length === 3 && v[2] !== ':') v = v.slice(0,2) + ':' + v[2];
        if (!/^\d{0,2}:?\d{0,2}$/.test(v)) v = v.slice(0,-1);
        this.value = v;
      });
    }

    // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
    function sendState() {
      if (!ready) return;
      
      // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –ª–æ–≥–æ—Ç–∏–ø—ã –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      const team1Logo = state.team1Logo || '';
      const team2Logo = state.team2Logo || '';
      
      socket.emit('updateScoreboard', {
        team1Name: document.getElementById('team1Name').value,
        team1City: document.getElementById('team1City').value,
        team1Short: document.getElementById('team1Short').value,
        team2Name: document.getElementById('team2Name').value,
        team2City: document.getElementById('team2City').value,
        team2Short: document.getElementById('team2Short').value,
        kit1Color: document.getElementById('kit1Color').value,
        kit2Color: document.getElementById('kit2Color').value,
        team1Logo: team1Logo,
        team2Logo: team2Logo
      });
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
    async function loadPresets() {
      try {
        const response = await fetch(`/api/presets?token=${getToken()}`);
        presets = await response.json();
        renderPresets();
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫:', error);
      }
    }

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
    function renderPresets() {
      const grid = document.getElementById('presetsGrid');
      grid.innerHTML = '';
      
      presets.forEach(preset => {
        const card = document.createElement('div');
        card.className = 'preset-card';
        card.innerHTML = `
          <div class="preset-content">
            <div class="preset-left">
          <div class="preset-name">${preset.name}</div>
          <div class="preset-teams">
                <span class="preset-team-name">${preset.team1Name}</span>
                <span class="preset-kit-color" style="background-color: ${preset.kit1Color}"></span>
                <span class="preset-separator">:</span>
                <span class="preset-kit-color" style="background-color: ${preset.kit2Color}"></span>
                <span class="preset-team-name">${preset.team2Name}</span>
            </div>
            </div>
            <div class="preset-right">
              <span class="preset-edit-link" onclick="editPreset('${preset.id}')">edit</span>
              <button class="preset-play-btn" onclick="confirmApplyPreset('${preset.id}')" ${timerRunning ? 'disabled' : ''} title="–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É">
                ‚ñ∂
              </button>
          </div>
          </div>
        `;
        
        grid.appendChild(card);
      });
    }

    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    function confirmApplyPreset(presetId) {
      const preset = presets.find(p => p.id === presetId);
      if (!preset) return;
      
      // –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
      const modal = document.createElement('div');
      modal.className = 'confirmation-modal';
      modal.innerHTML = `
        <div class="confirmation-content">
          <h3>–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É?</h3>
          <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É "<strong>${preset.name}</strong>"?</p>
          <p><small>–≠—Ç–æ –∑–∞–º–µ–Ω–∏—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥.</small></p>
          <div class="confirmation-buttons">
            <button class="confirmation-btn confirm" onclick="applyPreset('${presetId}'); closeConfirmation()">–î–∞, –ø—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <button class="confirmation-btn cancel" onclick="closeConfirmation()">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </div>
      `;
      
      document.body.appendChild(modal);
    }
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    function closeConfirmation() {
      const modal = document.querySelector('.confirmation-modal');
      if (modal) {
        modal.remove();
      }
    }

    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    function applyPreset(presetId) {
      const preset = presets.find(p => p.id === presetId);
      if (!preset) return;
      
      // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫ –æ—Å–Ω–æ–≤–Ω—ã–º –ø–æ–ª—è–º
      document.getElementById('team1Name').value = preset.team1Name;
      document.getElementById('team1City').value = preset.team1City;
      document.getElementById('team1Short').value = preset.team1Short;
      document.getElementById('kit1Color').value = preset.kit1Color;
      
      document.getElementById('team2Name').value = preset.team2Name;
      document.getElementById('team2City').value = preset.team2City;
      document.getElementById('team2Short').value = preset.team2Short;
      document.getElementById('kit2Color').value = preset.kit2Color;
      
      // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤
      if (preset.team1Logo) {
        updateMainLogoMini('team1', preset.team1Logo);
      } else {
        showKitColorCircle('team1');
      }
      
      if (preset.team2Logo) {
        updateMainLogoMini('team2', preset.team2Logo);
      } else {
        showKitColorCircle('team2');
      }
      
      // –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
      sendState();
      
      // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      showNotification(`–ü—Ä–∏–º–µ–Ω–µ–Ω–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞: ${preset.name}`, 'success');
    }

    // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    async function deletePreset(presetId) {
      if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É?')) return;
      
      try {
        await fetch(`/api/presets/${presetId}?token=${getToken()}`, {
          method: 'DELETE'
        });
        loadPresets();
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
      }
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    async function savePreset() {
      const preset = {
        name: document.getElementById('presetName').value.trim(),
        team1Name: document.getElementById('presetTeam1Name').value.trim(),
        team1City: document.getElementById('presetTeam1City').value.trim(),
        team1Short: document.getElementById('presetTeam1Short').value.trim().toUpperCase(),
        team2Name: document.getElementById('presetTeam2Name').value.trim(),
        team2City: document.getElementById('presetTeam2City').value.trim(),
        team2Short: document.getElementById('presetTeam2Short').value.trim().toUpperCase(),
        kit1Color: document.getElementById('presetKit1Color').value,
        kit2Color: document.getElementById('presetKit2Color').value
      };

      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!preset.name) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞');
        return;
      }
      
      if (!preset.team1Name || !preset.team2Name) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–±–µ–∏—Ö –∫–æ–º–∞–Ω–¥');
        return;
      }

      try {
        const response = await fetch(`/api/presets?token=${getToken()}`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(preset)
        });
        
        if (!response.ok) {
          throw new Error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏');
        }
        
        // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        document.getElementById('addPresetForm').querySelectorAll('input').forEach(input => {
          if (input.type === 'text') input.value = '';
          if (input.type === 'color') {
            if (input.id.includes('Kit1')) input.value = '#2b2b2b';
            if (input.id.includes('Kit2')) input.value = '#2b2b2b';
          }
        });
        
        // –°–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
        toggleAddPresetForm();
        
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
        await loadPresets();
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
        showNotification('–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!', 'success');
        
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
        showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏', 'error');
      }
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    function toggleAddPresetForm() {
      const form = document.getElementById('addPresetForm');
      form.classList.toggle('hidden');
    }
    
    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    function editPreset(presetId) {
      const preset = presets.find(p => p.id === presetId);
      if (!preset) return;
      
      editingPresetId = presetId;
      
      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
      originalPresetData = {
        name: preset.name,
        team1Name: preset.team1Name,
        team1City: preset.team1City,
        team1Short: preset.team1Short,
        kit1Color: preset.kit1Color,
        team2Name: preset.team2Name,
        team2City: preset.team2City,
        team2Short: preset.team2Short,
        kit2Color: preset.kit2Color
      };
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      document.getElementById('editPresetTitle').textContent = preset.name;
      document.getElementById('editPresetTeam1Name').value = preset.team1Name;
      document.getElementById('editPresetTeam1City').value = preset.team1City;
      document.getElementById('editPresetTeam1Short').value = preset.team1Short;
      document.getElementById('editPresetKit1Color').value = preset.kit1Color;
      document.getElementById('editPresetTeam2Name').value = preset.team2Name;
      document.getElementById('editPresetTeam2City').value = preset.team2City;
      document.getElementById('editPresetTeam2Short').value = preset.team2Short;
      document.getElementById('editPresetKit2Color').value = preset.kit2Color;
      
      // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–≥–æ—Ç–∏–ø—ã –µ—Å–ª–∏ –µ—Å—Ç—å
      if (preset.team1Logo) {
        showLogoPreview('team1', preset.team1Logo);
        updateLogoMini('team1', preset.team1Logo);
        uploadedLogos.team1 = preset.team1Logo;
      } else {
        clearLogo('team1');
        updateLogoMini('team1', null);
      }
      
      if (preset.team2Logo) {
        showLogoPreview('team2', preset.team2Logo);
        updateLogoMini('team2', preset.team2Logo);
        uploadedLogos.team2 = preset.team2Logo;
      } else {
        clearLogo('team2');
        updateLogoMini('team2', null);
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
      document.getElementById('editPresetForm').classList.remove('hidden');
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏
    async function updatePreset() {
      if (!editingPresetId) return;
      
      const preset = {
        name: document.getElementById('editPresetTitle').textContent.trim(),
        team1Name: document.getElementById('editPresetTeam1Name').value.trim(),
        team1City: document.getElementById('editPresetTeam1City').value.trim(),
        team1Short: document.getElementById('editPresetTeam1Short').value.trim().toUpperCase(),
        team2Name: document.getElementById('editPresetTeam2Name').value.trim(),
        team2City: document.getElementById('editPresetTeam2City').value.trim(),
        team2Short: document.getElementById('editPresetTeam2Short').value.trim().toUpperCase(),
        kit1Color: document.getElementById('editPresetKit1Color').value,
        kit2Color: document.getElementById('editPresetKit2Color').value,
        team1Logo: uploadedLogos.team1 || '',
        team2Logo: uploadedLogos.team2 || ''
      };

      // –í–∞–ª–∏–¥–∞—Ü–∏—è
      if (!preset.name) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∞—Ç—á–∞');
        return;
      }
      
      if (!preset.team1Name || !preset.team2Name) {
        alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –æ–±–µ–∏—Ö –∫–æ–º–∞–Ω–¥');
        return;
      }

      try {
        const response = await fetch(`/api/presets/${editingPresetId}?token=${getToken()}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(preset)
        });
        
        if (!response.ok) {
          throw new Error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏');
        }
        
        // –°–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
        cancelEditPreset();
        
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
        await loadPresets();
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
        showNotification('–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞!', 'success');
        
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
        showNotification('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏', 'error');
      }
    }
    
    // –û—Ç–º–µ–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    function cancelEditPreset() {
      editingPresetId = null;
      originalPresetData = null;
      document.getElementById('editPresetForm').classList.add('hidden');
    }
    
    // –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–∑ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    async function deletePresetFromEdit() {
      if (!editingPresetId) return;
      
      if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) return;
      
      try {
        const response = await fetch(`/api/presets/${editingPresetId}?token=${getToken()}`, {
          method: 'DELETE'
        });
        
        if (!response.ok) {
          throw new Error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏');
        }
        
        // –°–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã
        cancelEditPreset();
        
        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
        await loadPresets();
        
        // –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± —É—Å–ø–µ—Ö–µ
        showNotification('–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É–¥–∞–ª–µ–Ω–∞!', 'success');
        
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏:', error);
        showNotification('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏', 'error');
      }
    }

    // –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —à–æ—Ä—Ç–∫–æ–¥–æ–≤
    function autoShortName(fullId, shortId, def) {
      const fullInput = document.getElementById(fullId);
      const shortInput = document.getElementById(shortId);
      let manual = false;

      function updateShort() {
        if (!manual) {
          shortInput.value = (fullInput.value || def).toUpperCase().slice(0,3);
        }
      }
      fullInput.addEventListener('input', updateShort);
      shortInput.addEventListener('input', function() {
        this.value = this.value.toUpperCase().replace(/[^A-Z–ê-–Ø–Å0-9]/gi, '').slice(0,3);
        manual = true;
      });
      updateShort();
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    socket.on('scoreboardUpdate', (data) => {
      ready = false;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞
      const isRunning = !!data.timerRunning;
      timerRunning = isRunning;
      setPlayPauseIcon('playPauseIcon', isRunning);
      setTimeInputFromSeconds('timeInput', data.timerSeconds || 0);
      document.getElementById('timeInput').disabled = isRunning;
      
      // –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ —Ç–∞–π–º–µ—Ä–µ
      const warning = document.getElementById('timerWarning');
      if (isRunning) {
        warning.classList.remove('hidden');
      } else {
        warning.classList.add('hidden');
      }
      
      // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–µ–π –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Ç–∞–π–º–µ—Ä–∞
      const fieldsToDisable = [
        'team1Name', 'team1City', 'team1Short', 'kit1Color',
        'team2Name', 'team2City', 'team2Short', 'kit2Color'
      ];
      
      fieldsToDisable.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (isRunning) {
          field.classList.add('disabled-field');
        } else {
          field.classList.remove('disabled-field');
        }
      });
      
      // –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞
      const addBtn = document.getElementById('addPresetBtn');
      addBtn.disabled = false;
      addBtn.textContent = '+ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É';
      
      // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫
      const playButtons = document.querySelectorAll('.preset-play-btn');
      playButtons.forEach(btn => {
        if (isRunning) {
          btn.disabled = true;
          btn.title = '–ù–µ–ª—å–∑—è –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Ç–∞–π–º–µ—Ä–∞';
        } else {
          btn.disabled = false;
          btn.title = '–ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–∫—É';
        }
      });
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
      document.getElementById('score1Value').textContent = data.score1 ?? 0;
      document.getElementById('score2Value').textContent = data.score2 ?? 0;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥
      document.getElementById('team1Short').value = data.team1Short ?? "";
      document.getElementById('team2Short').value = data.team2Short ?? "";
      document.getElementById('kit1Color').value = data.kit1Color ?? "#2b2b2b";
      document.getElementById('kit2Color').value = data.kit2Color ?? "#2b2b2b";
      document.getElementById('team1Name').value = data.team1Name ?? "";
      document.getElementById('team2Name').value = data.team2Name ?? "";
      document.getElementById('team1City').value = data.team1City ?? "";
      document.getElementById('team2City').value = data.team2City ?? "";
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–æ–≥–æ—Ç–∏–ø–æ–≤
      state.team1Logo = data.team1Logo || '';
      state.team2Logo = data.team2Logo || '';
      
      if (data.team1Logo) {
        updateMainLogoMini('team1', data.team1Logo);
      } else {
        showKitColorCircle('team1');
      }
      
      if (data.team2Logo) {
        updateMainLogoMini('team2', data.team2Logo);
      } else {
        showKitColorCircle('team2');
      }
      
      // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–æ–∫ —Å —É—á–µ—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
      renderPresets();
      
      setTimeout(() => { ready = true; }, 50);
    });

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    function setPlayPauseIcon(iconId, isPlaying) {
      const icon = document.getElementById(iconId);
      icon.innerHTML = isPlaying
        ? `<rect x="8" y="6" width="5" height="20" fill="white"/><rect x="19" y="6" width="5" height="20" fill="white"/>`
        : `<polygon points="8,6 26,16 8,26" fill="white"/>`;
    }

    function setTimeInputFromSeconds(inputId, sec) {
      const input = document.getElementById(inputId);
      const mm = Math.floor(sec/60).toString().padStart(2, '0');
      const ss = (sec%60).toString().padStart(2, '0');
      input.value = `${mm}:${ss}`;
    }

    function getSecondsFromTimeInput(inputId) {
      const val = document.getElementById(inputId).value;
      if (/^\d{2}:\d{2}$/.test(val)) {
        const [mm, ss] = val.split(':').map(Number);
        return mm*60 + ss;
      }
      return 0;
    }

    function getToken() {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get('token') || 'MySecret111';
    }
    
    // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
    function showNotification(message, type = 'info') {
      // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#17a2b8'};
        color: white;
        padding: 12px 20px;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        z-index: 10000;
        font-size: 14px;
        max-width: 300px;
        animation: slideIn 0.3s ease-out;
      `;
      notification.textContent = message;
      
      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π –∞–Ω–∏–º–∞—Ü–∏–∏
      if (!document.getElementById('notification-styles')) {
        const style = document.createElement('style');
        style.id = 'notification-styles';
        style.textContent = `
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `;
        document.head.appendChild(style);
      }
      
      document.body.appendChild(notification);
      
      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
      setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-in';
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
  </script>
</body>
</html>