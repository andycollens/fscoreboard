# CHANGELOG

## [2.0.0] - 2024-12-20

### Добавлено
- Система графических стилей с динамическим переключением (default, iskracup, custom)
- Страница `preloader.html` с анимацией лого для стримов
- Кастомные стили с загрузкой логотипов и фонов
- Система управления турнирами с командами
- Режим пенальти с поддержкой детского (3 удара) и взрослого (5 ударов) режимов
- Режим работы табло стадиона (Табло, Флаг, Победители, Лого, Пенальти)
- Настройка названия турнира на табло стадиона
- Улучшенная панель настроек с секциями для графического оформления

### Изменено
- Рефакторинг страниц: объединены `iskracup_*` страницы в единые страницы с переключением стилей
- `scoreboard.html`, `penalti.html`, `prematch.html`, `break.html` теперь поддерживают динамическое переключение стилей
- Улучшена структура настроек: добавлены "шахматные" кнопки для выбора режимов
- Оптимизирована мобильная версия панели управления

### Удалено
- Устаревшие страницы: `iskracup_scoreboard.html`, `iskracup_break.html`, `iskracup_prematch.html`, `iskracup_penalti.html`
- Устаревшие страницы: `htbreak_score.html`, `preloader.html` (старая версия)

### Улучшено
- Динамическое переключение стилей без перезагрузки страницы
- Адаптивность всех страниц для мобильных устройств
- Производительность: оптимизированы переходы между стилями
- UX: улучшена навигация и визуальное оформление настроек

## [1.1.0] - 2024-10-23

### Добавлено
- ISKRA CUP страницы с брендингом (iskracup_scoreboard.html, iskracup_break.html, iskracup_prematch.html)
- Логотипы команд в предустановках матчей
- Защита от изменений во время работы таймера
- Система предустановок матчей с полным CRUD
- Загрузка и управление логотипами команд
- Автозапуск PM2 при перезагрузке сервера

### Улучшено
- Позиционирование элементов на ISKRA CUP страницах
- Плавная загрузка страниц без мерцания
- Мобильная адаптивность панели управления
- Система защиты от случайных изменений

## [1.0.0] - 2024-10-22

### Добавлено
- Полная система табло в реальном времени с Express + Socket.IO
- Панель управления с токен-защитой
- Четыре типа оверлеев (основной, перерыв, счёт перерыва, загрузка)
- REST API с Bearer токен аутентификацией
- Socket.IO с разделением на пространства имён
- Серверная логика таймера с персистентностью
- Валидация и нормализация всех входных данных
- Rate limiting и защита от атак
- Полная документация (README, DEPLOY, OPERATIONS, API, SECURITY)
- Конфигурации для PM2 и Nginx
- Docker поддержка
- Автоматическое резервное копирование

### Исправлено
- Устранена опечатка в роуте к scoreboard_vmix.html
- Убрана небезопасная статическая раздача /private
- Оптимизирована запись state.json (троттлинг)
- Улучшена безопасность панели управления

### Изменено
- Перенесён app.js в server/app.js
- Добавлена поддержка .env конфигурации
- Реализована токен-защита для всех управляющих функций
- Улучшена структура проекта
- Добавлены CSS переменные для смещения оверлеев

### Безопасность
- Токен-проверка для панели управления
- Bearer токен для API endpoints
- Валидация всех входных данных
- Rate limiting для защиты от атак
- Security headers через Helmet.js
- SSL/TLS конфигурация для Nginx

### Производительность
- Троттлинг записи состояния (не чаще 1 раза в секунду)
- Оптимизированные Socket.IO соединения
- Кэширование статических файлов в Nginx
- Мониторинг ресурсов через PM2

### Документация
- README.md с быстрым стартом
- DEPLOY.md с пошаговым развёртыванием на Ubuntu 24.04
- OPERATIONS.md с командами управления и мониторинга
- API.md с полным описанием API и Socket.IO событий
- SECURITY.md с моделью угроз и рекомендациями

### Конфигурация
- ecosystem.config.js для PM2
- nginx-scoreboard.conf для Nginx
- Dockerfile и docker-compose.yml
- .eslintrc.json и .prettierrc для качества кода
- .gitignore для исключения чувствительных файлов

