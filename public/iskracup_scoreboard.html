<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>ISKRA CUP Scoreboard</title>
  <style>
    @font-face {
      font-family: 'RPL';
      src: url('/public/fonts/RPL.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    html, body {
      font-family: 'RPL', Arial, sans-serif;
      background: transparent !important;
      margin: 0;
      padding: 0;
      position: relative;
    }
    body {
      font-family: 'RPL', Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      background: transparent !important;
    }
    .scoreboard-row {
      display: flex;
      flex-direction: row;
      align-items: stretch;
      height: 40px;
      line-height: 40px;
      user-select: none;
      -webkit-user-select: none;
      background: transparent !important;
      font-size: 24px;
      gap: 0;
    }
    .section {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 40px;
      line-height: 40px;
      box-sizing: border-box;
      font-family: 'RPL', Arial, sans-serif;
      font-weight: normal;
      border-radius: 0;
      box-shadow: none;
      background: transparent;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    .timer-section {
      width: 100px;
      background: #f6f3fc;
      color: #2b2b2b;
      font-size: 1.4em;
      letter-spacing: 2px;
    }
    .kit1-section, .kit2-section {
      width: 10px;
      background: #2b2b2b;
    }
    .team1-section, .team2-section {
      width: 70px;
      background: #2b2b2b;
      color: #fff;
      font-size: 1.25em;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    .score1-section, .score2-section {
      width: 40px;
      background: #2b2b2b;
      color: #fff;
      font-size: 1.6em;
      font-weight: normal;
    }
    .divider-section {
      width: 60px;
      background: #2b2b2b;
      height: 40px;
      line-height: 40px;
      margin: 0;
      padding: 0;
      border-radius: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      flex-grow: 0;
    }
    .scoreboard-row > * {
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
    }
  </style>
</head>
<body>
  <div class="scoreboard-row" style="position: absolute; top: 80px; left: 120px;">
    <!-- Timer section: displays the game timer, now lifted by 3px -->
    <div class="section timer-section"><span id="timer" style="display: flex; align-items: flex-start; justify-content: center; height: 100%; width: 100%; font-size: inherit; transform: translateY(2px);">00:00</span></div>
    <!-- Kit 1 section: displays the color of the first team's kit -->
    <div class="section kit1-section" id="kit1"></div>
    <!-- Team 1 section: displays the short name of the first team, now lifted by 3px -->
    <div class="section team1-section"><span id="team1" style="display: flex; align-items: flex-start; justify-content: center; height: 100%; width: 100%; font-size: inherit; transform: translateY(2px);">ABC</span></div>
    <!-- Score 1 section: displays the score of the first team, now lifted by 3px -->
    <div class="section score1-section"><span id="score1" style="display: flex; align-items: flex-start; justify-content: center; height: 100%; width: 100%; font-size: inherit; transform: translateY(2px);">0</span></div>
    <!-- Divider section with ISKRA CUP logo -->
    <div class="section divider-section">
      <img src="/public/img/iskracup_scoreboard_logo.png" alt="ISKRA CUP" style="max-height: 30px; max-width: 50px; object-fit: contain;">
    </div>
    <!-- Score 2 section: displays the score of the second team, now lifted by 3px -->
    <div class="section score2-section"><span id="score2" style="display: flex; align-items: flex-start; justify-content: center; height: 100%; width: 100%; font-size: inherit; transform: translateY(2px);">0</span></div>
    <!-- Team 2 section: displays the short name of the second team, now lifted by 3px -->
    <div class="section team2-section"><span id="team2" style="display: flex; align-items: flex-start; justify-content: center; height: 100%; width: 100%; font-size: inherit; transform: translateY(2px);">XYZ</span></div>
    <!-- Kit 2 section: displays the color of the second team's kit -->
    <div class="section kit2-section" id="kit2"></div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    // Default colors and team names for the scoreboard
    const defaultKitColor = "#2b2b2b";
    const defaultTeamShort = "???";
    
    // Initialize socket.io client
    const socket = io();

    // Listen for 'scoreboardUpdate' events from the server
    socket.on('scoreboardUpdate', (data) => {
      // Update timer display
      document.getElementById('timer').textContent = data.time || "00:00";
      // Update kit colors
      document.getElementById('kit1').style.background = data.kit1Color || defaultKitColor;
      document.getElementById('kit2').style.background = data.kit2Color || defaultKitColor;
      // Update team names
      document.getElementById('team1').textContent = data.team1Short || defaultTeamShort;
      document.getElementById('team2').textContent = data.team2Short || defaultTeamShort;
      // Update scores, ensuring they are numbers
      document.getElementById('score1').textContent = typeof data.score1 === 'number' ? data.score1 : "0";
      document.getElementById('score2').textContent = typeof data.score2 === 'number' ? data.score2 : "0";
    });
  </script>
</body>
</html>